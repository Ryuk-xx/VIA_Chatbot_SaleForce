app:
  description: Tr·ª£ l√Ω chatbot Ng∆∞·ªùi ƒë·ªìng h√†nh
  icon: ü§ñ
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: Chatbot  test
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai:0.0.29@9e17ae8073fe53c282e9dc411e76a3cc52f8e794e4cc2499d204502086871c53
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - document
      - image
      - audio
      - video
      allowed_file_upload_methods:
      - remote_url
      - local_file
      enabled: true
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: "<div style=\"text-align: center; padding: 20px; font-family:\
      \ Arial, sans-serif;\">\n  <h2 style=\"font-size: 28px; color: #2c3e50;\">\U0001F6CD\
      Ô∏è <strong>Ch√†o anh/ch·ªã!</strong></h2>\n  <p style=\"font-size: 20px; color:\
      \ #34495e;\">\n    \U0001F916 Em l√† <strong>tr·ª£ l√Ω ·∫£o D∆∞∆°ng</strong> ƒë·∫øn t·ª´\
      \ \n    <a href=\"https://aoismart.vn\" target=\"_blank\" style=\"color: #2980b9;\
      \ text-decoration: none;\"><em>Aoismart</em></a>, lu√¥n s·∫µn s√†ng h·ªó tr·ª£ anh/ch·ªã\
      \ ch·ªçn mua s·∫£n ph·∫©m ph√π h·ª£p nh·∫•t!\n  </p>\n  <p style=\"font-size: 20px; color:\
      \ #34495e;\">\n    \U0001F3AF Em c√≥ th·ªÉ gi·ªõi thi·ªáu s·∫£n ph·∫©m, t∆∞ v·∫•n theo nhu\
      \ c·∫ßu s·ª≠ d·ª•ng, so s√°nh gi·ªØa c√°c l·ª±a ch·ªçn v√† h∆∞·ªõng d·∫´n c√°ch ƒë·∫∑t h√†ng ·∫°.\n  </p>\n\
      \  <p style=\"font-size: 20px; color: #e67e22;\">\n    ‚ùì <strong>H√¥m nay anh/ch·ªã\
      \ ƒëang quan t√¢m ƒë·∫øn s·∫£n ph·∫©m g√¨ ƒë·ªÉ em h·ªó tr·ª£ ngay nh√©?</strong>\n  </p>\n</div>\n"
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: true
    suggested_questions:
    - S·∫£n ph·∫©m ƒëi·ªÅu h√≤a gi√° t·ªët nh·∫•t
    - Gi·ªõi thi·ªáu v·ªÅ ƒë√®n nƒÉng l∆∞·ª£ng m·∫∑t tr·ªùi
    - C√°c s·∫£n ph·∫©m ƒë·ªì gia d·ª•ng
    - B·∫£o d∆∞·ª°ng m√°y gi·∫∑t
    suggested_questions_after_answer:
      enabled: true
    text_to_speech:
      enabled: true
      language: vi-VN
      voice: ''
  graph:
    edges:
    - data:
        sourceType: llm
        targetType: answer
      id: 1711528917469-1711528919501
      selected: false
      source: '1711528917469'
      sourceHandle: source
      target: '1711528919501'
      targetHandle: target
      type: custom
    - data:
        isInLoop: false
        sourceType: question-classifier
        targetType: knowledge-retrieval
      id: 1750388567119-1-1711528915811-target
      selected: false
      source: '1750388567119'
      sourceHandle: '1'
      target: '1711528915811'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: question-classifier
        targetType: http-request
      id: 1750388567119-1751441843226-1751441804083-target
      source: '1750388567119'
      sourceHandle: '1751441843226'
      target: '1751441804083'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 1751441804083-source-1751441997700-target
      source: '1751441804083'
      sourceHandle: source
      target: '1751441997700'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: if-else
      id: 1751441997700-source-1751442059253-target
      source: '1751441997700'
      sourceHandle: source
      target: '1751442059253'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1751442059253-true-1751442117083-target
      source: '1751442059253'
      sourceHandle: 'true'
      target: '1751442117083'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 1751442117083-source-1751442552657-target
      source: '1751442117083'
      sourceHandle: source
      target: '1751442552657'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17514422823900-source-1751442560789-target
      source: '17514422823900'
      sourceHandle: source
      target: '1751442560789'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: llm
      id: 1711528915811-source-1711528917469-target
      source: '1711528915811'
      sourceHandle: source
      target: '1711528917469'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1751442059253-false-17514422823900-target
      source: '1751442059253'
      sourceHandle: 'false'
      target: '17514422823900'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: start
        targetType: llm
      id: 1711528914102-source-1752117156677-target
      source: '1711528914102'
      sourceHandle: source
      target: '1752117156677'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: question-classifier
      id: 1752117156677-source-1750388567119-target
      source: '1752117156677'
      sourceHandle: source
      target: '1750388567119'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: question-classifier
        targetType: llm
      id: 1750388567119-1751426581390-1752232687478-target
      selected: false
      source: '1750388567119'
      sourceHandle: '1751426581390'
      target: '1752232687478'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 1752232687478-source-1752232771993-target
      source: '1752232687478'
      sourceHandle: source
      target: '1752232771993'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: question-classifier
        targetType: http-request
      id: 1750388567119-1752466670687-17524662667200-target
      source: '1750388567119'
      sourceHandle: '1752466670687'
      target: '17524662667200'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: http-request
        targetType: if-else
      id: 17524662667200-source-17524749555520-target
      source: '17524662667200'
      sourceHandle: source
      target: '17524749555520'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17524749555520-false-17514422823900-target
      source: '17524749555520'
      sourceHandle: 'false'
      target: '17514422823900'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17524749555520-true-17524765005320-target
      source: '17524749555520'
      sourceHandle: 'true'
      target: '17524765005320'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17524765005320-source-17524763177240-target
      source: '17524765005320'
      sourceHandle: source
      target: '17524763177240'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: Start
        type: start
        variables: []
      height: 50
      id: '1711528914102'
      position:
        x: -446.82438052123814
        y: 118.8754112983066
      positionAbsolute:
        x: -446.82438052123814
        y: 118.8754112983066
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        dataset_ids:
        - aE0ilN2VTBcUKRoJHFzyzSMKG3EPEMGDQFNRpo8QraIvFTRu2yCH6pok3Jepy5T3
        desc: Cho ph√©p b·∫°n truy v·∫•n n·ªôi dung vƒÉn b·∫£n li√™n quan ƒë·∫øn c√¢u h·ªèi c·ªßa ng∆∞·ªùi
          d√πng t·ª´ Ki·∫øn th·ª©c
        metadata_filtering_mode: disabled
        metadata_model_config:
          completion_params:
            frequency_penalty: 0.3
            presence_penalty: 0.2
            temperature: 0.5
            top_p: 0.85
          mode: chat
          name: gpt-4.1-mini-2025-04-14
          provider: langgenius/openai/openai
        multiple_retrieval_config:
          reranking_enable: false
          reranking_mode: reranking_model
          reranking_model:
            model: rerank-v3.5
            provider: langgenius/cohere/cohere
          score_threshold: 0.7
          top_k: 5
        query_variable_selector:
        - '1752117156677'
        - text
        retrieval_mode: multiple
        selected: false
        single_retrieval_config:
          model:
            completion_params:
              frequency_penalty: 0
              max_tokens: 512
              presence_penalty: 0
              temperature: 0
              top_p: 1
            mode: chat
            name: gpt-3.5-turbo
            provider: openai
        title: Knowledge Retrieval
        type: knowledge-retrieval
      dragging: false
      height: 163
      id: '1711528915811'
      position:
        x: 832.1046123270287
        y: -9.72903285604238
      positionAbsolute:
        x: 832.1046123270287
        y: -9.72903285604238
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - '1752117156677'
          - text
        desc: G·ªçi c√°c m√¥ h√¨nh ng√¥n ng·ªØ l·ªõn ƒë·ªÉ tr·∫£ l·ªùi c√°c c√¢u h·ªèi ho·∫∑c x·ª≠ l√Ω ng√¥n
          ng·ªØ t·ª± nhi√™n
        memory:
          query_prompt_template: '{{#sys.query#}}{{#1752117156677.text#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 30
        model:
          completion_params:
            frequency_penalty: 0.5
            max_tokens: 14601
            presence_penalty: 0.5
            temperature: 0.2
            top_p: 0.75
          mode: chat
          name: gpt-4.1-2025-04-14
          provider: langgenius/openai/openai
        prompt_config:
          jinja2_variables:
          - value_selector:
            - '1750388567119'
            - class_name
            variable: class_name
        prompt_template:
        - edition_type: basic
          id: 7fd82cf7-ea31-45c8-b9ac-3c711ee275a2
          jinja2_text: ''
          role: system
          text: '# ƒê·ªãnh danh v√† vai tr√≤:

            - B·∫°n l√† Tr·ª£ l√Ω chatbot chuy√™n t∆∞ v·∫•n v√† gi·ªõi thi·ªáu c√°c s·∫£n ph·∫©m tr√™n
            trang web b√°n h√†ng **Aoismart**.

            - T√™n ƒë·∫ßy ƒë·ªß b·∫°n: **D∆∞∆°ng**

            - Ng√¥n ng·ªØ s·ª≠ d·ª•ng: **Ti·∫øng Vi·ªát** (vƒÉn n√≥i, ng·∫Øn g·ªçn, th√¢n thi·ªán)

            - X∆∞ng h√¥: Lu√¥n x∆∞ng l√† ‚Äúem‚Äù v√† g·ªçi kh√°ch h√†ng l√† ‚Äúanh/ch·ªã‚Äù ƒë·ªÉ th·ªÉ hi·ªán
            s·ª± l·ªÖ ph√©p, chuy√™n nghi·ªáp.

            - Gi·ªçng ƒëi·ªáu: **Th√¢n thi·ªán ‚Äì t·ª± tin ‚Äì chuy√™n nghi·ªáp ‚Äì g·∫ßn g≈©i ‚Äì h√†i h∆∞·ªõc
            nh·∫π nh√†ng**

            - M·ª•c ti√™u: H∆∞·ªõng d·∫´n, g·ª£i √Ω v√† gi·ªõi thi·ªáu s·∫£n ph·∫©m ph√π h·ª£p v·ªõi nhu c·∫ßu
            c·ªßa kh√°ch h√†ng d·ª±a tr√™n th√¥ng tin c√≥ s·∫µn tr√™n website Aoismart.



            # S·ª≠ d·ª•ng ng·ªØ c·∫£nh sau ƒë√¢y l√†m ki·∫øn ‚Äã‚Äãth·ª©c ƒë√£ h·ªçc c·ªßa b·∫°n, b√™n trong th·∫ª
            XML <context></context>.

            <context>

            {{#context#}}

            </context>



            # Nguy√™n t·∫Øc tr·∫£ l·ªùi:

            - C·∫•m b·ªãa ƒë·∫∑t n·ªôi dung kh√¥ng ƒë∆∞·ª£c cung c·∫•p.

            - N·∫øu em kh√¥ng bi·∫øt, em s·∫Ω n√≥i r√µ l√† ch∆∞a c√≥ th√¥ng tin ·∫°.

            - N·∫øu ch∆∞a ch·∫Øc ch·∫Øn ho·∫∑c kh√¥ng c√≥ th√¥ng tin, em s·∫Ω xin ph√©p h·ªèi l·∫°i ƒë·ªÉ
            l√†m r√µ nhu c·∫ßu.

            - Kh√¥ng d√πng t·ª´ ng·ªØ kh√≥ hi·ªÉu ho·∫∑c l√Ω thuy·∫øt h√†n l√¢m.

            - Kh√¥ng cung c·∫•p th√¥ng tin sai, kh√¥ng r√µ ngu·ªìn g·ªëc t·ª´ h·ªá th·ªëng s·∫£n ph·∫©m
            Aoismart.

            - Kh√¥ng ƒë·ªÅ c·∫≠p ƒë·∫øn chuy·ªán l·∫•y th√¥ng tin t·ª´ ng·ªØ c·∫£nh hay h·ªá th·ªëng ph√≠a
            sau.



            # ƒê·ªãnh d·∫°ng ƒë·∫ßu ra:

            - Tr·∫£ l·ªùi b·∫±ng Markdown r√µ r√†ng (v√≠ d·ª•: d√πng # cho ti√™u ƒë·ªÅ, ** ** cho
            in ƒë·∫≠m).

            - S·ª≠ d·ª•ng Emoji th√¢n thi·ªán v√† chuy√™n nghi·ªáp t·∫°i c√°c ƒë·∫ßu m·ª•c, gi·ªØ nguy√™n
            c·∫•u tr√∫c vƒÉn b·∫£n v√† c·∫•u tr√∫c h√¨nh ·∫£nh trong b√†i vi·∫øt.

            - Gi·ªØ nguy√™n v√† hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß ƒë∆∞·ªùng d·∫´n h√¨nh ·∫£nh s·∫£n ph·∫©m (kh√¥ng t·ª±
            b·ªãa ·∫£nh, ch·ªâ l·∫•y ·∫£nh ·ªü ph·∫ßn thumbnail n·∫øu c√≥) theo ƒë√∫ng c√∫ ph√°p: ![](https://aoismart.....)

            - N·∫øu nh∆∞ t·∫°o b·∫£ng so s√°nh c√°c s·∫£n ph·∫©m th√¨ kh√¥ng ƒë∆∞·ª£c ƒë∆∞a ·∫£nh v√†o trong
            b·∫£ng ƒë√≥

            - Kh√¥ng bao gi·ªù ƒë·∫∑t to√†n b·ªô c√¢u tr·∫£ l·ªùi v√†o trong kh·ªëi m√£ (```markdown
            ... ```).'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        structured_output_enabled: false
        title: LLM 1
        type: llm
        variables: []
        vision:
          configs:
            detail: high
            variable_selector:
            - sys
            - files
          enabled: true
      height: 172
      id: '1711528917469'
      position:
        x: 1372.995863171718
        y: -9.72903285604238
      positionAbsolute:
        x: 1372.995863171718
        y: -9.72903285604238
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1711528917469.text#}}

          '
        desc: ''
        selected: false
        title: Answer
        type: answer
        variables: []
      height: 98
      id: '1711528919501'
      position:
        x: 2389.2818044889814
        y: 2.713739061688784
      positionAbsolute:
        x: 2389.2818044889814
        y: 2.713739061688784
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        classes:
        - id: '1'
          name: 'N·∫øu c√¢u h·ªèi ch·ª©a tham chi·∫øu ƒë·∫øn s·∫£n ph·∫©m c·ª• th·ªÉ nh∆∞ th√¥ng tin m√¥
            t·∫£, ƒë√°nh gi√° chung, (v√≠ d·ª•: t√™n model, t√≠nh nƒÉng, c√¥ng d·ª•ng‚Ä¶) '
        - id: '1751426581390'
          name: C√°c c√¢u ch√†o h·ªèi, t√¢m s·ª±, c·∫£m ∆°n, t√¢m s·ª±, h·ªèi v·ªÅ th√¥ng tin kh√¥ng li√™n
            quan g√¨ ƒë·∫øn s·∫£n ph·∫©m
        - id: '1751441843226'
          name: '- N·∫øu ng∆∞·ªùi d√πng h·ªèi v·ªÅ vi·ªác so s√°nh hai hay nhi·ªÅu s·∫£n ph·∫©m, ho·∫∑c
            t√¨m s·∫£n theo ti√™u ch√≠ n√†o ƒë√≥ (v√≠ d·ª•: gi√° < X, m√†u s·∫Øc, dung l∆∞·ª£ng trong
            kho·∫£ng .. ƒë·∫øn .., c√¥ng su·∫•t l·ªõn nh·∫•t, t·ªët, r·∫ª nh·∫•t, kho·∫£ng bao nhi√™u,
            kh·ªëi l∆∞·ª£ng nh·ªè, ..)

            - N·∫øu ng∆∞·ªùi d√πng h·ªèi v·ªÅ m·ªôt s·ªë ti√™u ch√≠ ƒë·∫∑c tr∆∞ng (v√≠ d·ª•: ch·ªëng n∆∞·ªõc,
            ch·ªëng va ƒë·∫≠p, ..)'
        - id: '1752466670687'
          name: '- C√¢u h·ªèi li√™n quan ƒë·∫øn d·ªãch v·ª•: s·ª≠a ch·ªØa, l·∫Øp ƒë·∫∑t, n√¢ng c·∫•p, th√°o
            d·ª°, b·∫£o d∆∞·ª°ng, ..'
        desc: ''
        instruction: ''
        instructions: ''
        memory:
          query_prompt_template: '{{#sys.query#}}'
          window:
            enabled: true
            size: 5
        model:
          completion_params:
            frequency_penalty: 0.5
            presence_penalty: 0.5
            temperature: 0.2
            top_p: 0.75
          mode: chat
          name: gpt-4.1-mini-2025-04-14
          provider: langgenius/openai/openai
        query_variable_selector:
        - '1752117156677'
        - text
        selected: false
        title: Ph√¢n lo·∫°i c√¢u h·ªèi
        topics: []
        type: question-classifier
        vision:
          configs:
            detail: high
            variable_selector:
            - sys
            - files
          enabled: false
      height: 545
      id: '1750388567119'
      position:
        x: 149.07119202130787
        y: -27.314930162323492
      positionAbsolute:
        x: 149.07119202130787
        y: -27.314930162323492
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: key-value-875
            key: ''
            type: text
            value: '{"query": "{{#1752117156677.text#}}"}'
          type: json
        desc: L·∫•y d·ªØ li·ªáu t·ª´ sql query
        headers: 'accept:application/json

          Content-Type:application/json'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: SQL_PRODUCT
        type: http-request
        url: http://10.33.88.150:8004/sql_retrieval
        variables: []
      height: 161
      id: '1751441804083'
      position:
        x: 890.471641531916
        y: 673.3758019797461
      positionAbsolute:
        x: 890.471641531916
        y: 673.3758019797461
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(body: str) -> dict:\n    import json\n\n    body = json.loads(body)\n\
          \    return {\n        \"results\": body.get(\"results\"),\n        \"sql_query\"\
          : body.get(\"sql_query\"),\n    }"
        code_language: python3
        desc: ''
        outputs:
          results:
            children: null
            type: string
          sql_query:
            children: null
            type: string
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        title: sql_result
        type: code
        variables:
        - value_selector:
          - '1751441804083'
          - body
          variable: body
      height: 79
      id: '1751441997700'
      position:
        x: 1225.8881215900594
        y: 673.3758019797461
      positionAbsolute:
        x: 1225.8881215900594
        y: 673.3758019797461
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: <
            id: 16ba0dc0-cc0e-4f2c-bf5c-4ee489ed3259
            value: '300'
            varType: number
            variable_selector:
            - '1751441804083'
            - status_code
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: N·∫æU/NG∆Ø·ª¢C L·∫†I
        type: if-else
      height: 118
      id: '1751442059253'
      position:
        x: 1552.2096970392697
        y: 673.3758019797461
      positionAbsolute:
        x: 1552.2096970392697
        y: 673.3758019797461
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - '1751441997700'
          - sql_query
        desc: ''
        memory:
          query_prompt_template: '{{#sys.query#}} {{#1752117156677.text#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 30
        model:
          completion_params:
            frequency_penalty: 0.5
            presence_penalty: 0.5
            temperature: 0.2
            top_p: 0.75
          mode: chat
          name: gpt-4.1-2025-04-14
          provider: langgenius/openai/openai
        prompt_template:
        - id: 09ab584c-c28a-4834-a84d-75ccdc57449f
          role: system
          text: "\"\"\"\n# ƒê·ªãnh danh v√† vai tr√≤:\n# Vai tr√≤ & ƒë·ªãnh danh:\nB·∫°n l√† Tr·ª£\
            \ l√Ω t∆∞ v·∫•n mua s·∫Øm th√¥ng minh t·∫°i website th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠ **AIO Smart**\
            \ ‚Äì n·ªÅn t·∫£ng chuy√™n cung c·∫•p c√°c thi·∫øt b·ªã ƒëi·ªán t·ª≠, ƒë·ªì gia d·ª•ng, thi·∫øt\
            \ b·ªã nƒÉng l∆∞·ª£ng m·∫∑t tr·ªùi,... do T·ªïng c√¥ng ty C·ªï ph·∫ßn C√¥ng tr√¨nh Viettel\
            \ VCC ph√¢n ph·ªëi.\n\n\n## T√™n tr·ª£ l√Ω: **D∆∞∆°ng**\n- Ng√¥n ng·ªØ: **Ti·∫øng Vi·ªát**\
            \ (gi·ªçng vƒÉn ng·∫Øn g·ªçn, t·ª± nhi√™n, d·ªÖ hi·ªÉu)\n- X∆∞ng h√¥: **x∆∞ng \"em\", g·ªçi\
            \ kh√°ch l√† \"anh/ch·ªã\"**\n- Gi·ªçng ƒëi·ªáu: **th√¢n thi·ªán ‚Äì chuy√™n nghi·ªáp ‚Äì\
            \ t·ª± tin ‚Äì h√†i h∆∞·ªõc**\n- Phong c√°ch tr·∫£ l·ªùi: gi·ªëng nh∆∞ m·ªôt **nh√¢n vi√™n\
            \ b√°n h√†ng hi·ªÉu s·∫£n ph·∫©m t·∫≠n rƒÉng**\n- M·ª•c ti√™u: Gi·ªõi thi·ªáu, so s√°nh,\
            \ ph√¢n t√≠ch ∆∞u ƒëi·ªÉm s·∫£n ph·∫©m v√† gi√∫p anh/ch·ªã ch·ªçn ƒë∆∞·ª£c m√≥n h√†ng ph√π h·ª£p\
            \ nh·∫•t theo nhu c·∫ßu.\n\n\n# D·ªØ li·ªáu truy v·∫•n (context):\n- {{#1751441997700.results#}}\n\
            \n# C√ÇU H·ªéI NG∆Ø·ªúI D√ôNG:\n- {{#sys.query#}}\n\n\n# NGUY√äN T·∫ÆC TR·∫¢ L·ªúI:\n\
            - Ki·∫øn th·ª©c v·ªÅ s·∫£n ph·∫©m d·ª±a tr√™n ng·ªØ c·∫£nh ƒë∆∞·ª£c cung c·∫•p\n- Kh√¥ng t·ª± b·ªãa\
            \ ho·∫∑c suy di·ªÖn n·∫øu kh√¥ng c√≥ d·ªØ li·ªáu.\n- N·∫øu kh√¥ng ch·∫Øc ch·∫Øn, h√£y h·ªèi\
            \ l·∫°i ng∆∞·ªùi d√πng c·ª• th·ªÉ v·ªÅ s·∫£n ph·∫©m h·ªç c·∫ßn\n- N·∫øu s·∫£n ph·∫©m ng∆∞·ªùi d√πng\
            \ h·ªèi kh√¥ng t·ªìn t·∫°i trong d·ªØ li·ªáu ƒë∆∞·ª£c cung c·∫•p, h√£y gi·∫£i th√≠ch cho h·ªç\
            \ s·∫£n ph·∫©m hi·ªán ch∆∞a ƒë∆∞·ª£c b√°n ·ªü website v√† h∆∞·ªõng h·ªç sang c√°c thi·∫øt b·ªã\
            \ thi·∫øt b·ªã ƒëi·ªán t·ª≠, ƒë·ªì gia d·ª•ng, thi·∫øt b·ªã nƒÉng l∆∞·ª£ng m·∫∑t tr·ªùi.\n- Lu√¥n\
            \ trung th·ª±c v√† th√¢n thi·ªán nh∆∞ m·ªôt nh√¢n vi√™n b√°n h√†ng uy t√≠n.\n\n\n# C·∫§U\
            \ TR√öC OUTPUT:\n- **Lu√¥n tr·∫£ l·ªùi b·∫±ng ƒë·ªãnh d·∫°ng markdown** d·ªÖ ƒë·ªçc tr√™n\
            \ web.\n- **Link web v√† ƒë∆∞·ªùng d·∫´n gi·ªØ nguy√™n ƒë·ªãnh d·∫°ng ƒë·∫ßy ƒë·ªß, kh√¥ng m√£\
            \ h√≥a.**\n- N·∫øu c√≥ th·ªÉ, h√£y tr√¨nh b√†y d·∫°ng b·∫£ng ho·∫∑c danh s√°ch g·∫°ch ƒë·∫ßu\
            \ d√≤ng cho tr·ª±c quan.\n- Gi·ªØ nguy√™n v√† hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß ƒë∆∞·ªùng d·∫´n h√¨nh\
            \ ·∫£nh s·∫£n ph·∫©m (ch·ªâ ·∫£nh thumbnail n·∫øu c√≥) theo ƒë√∫ng c√∫ ph√°p: ![](https://aoismart.vn/media/images/...)\
            \ \n- N·∫øu t·∫°o b·∫£ng so s√°nh th√¨ kh√¥ng c·∫ßn ph·∫£i ƒë∆∞a ·∫£nh v√†o trong b·∫£ng ƒë√≥\n\
            - K·∫øt th√∫c b·∫±ng m·ªôt g·ª£i √Ω ho·∫∑c l·ªùi m·ªùi g·ªçi th√¢n thi·ªán (call-to-action).\n\
            \n\n\n# Y√äU C·∫¶U:\n- Tr·∫£ l·ªùi ƒë√∫ng tr·ªçng t√¢m c√¢u h·ªèi, kh√¥ng lan man.\n-\
            \ N·∫øu s·∫£n ph·∫©m c√≥ gi√°: ghi r√µ ƒë∆°n v·ªã l√† **VND**, l√†m tr√≤n ƒë∆°n v·ªã h·ª£p l√Ω\
            \ ƒë·ªÉ d·ªÖ nh√¨n.\n- N·∫øu c√≥ th√¥ng s·ªë k·ªπ thu·∫≠t ho·∫∑c ƒë·∫∑c ƒëi·ªÉm n·ªïi b·∫≠t: h√£y g·∫°ch\
            \ ƒë·∫ßu d√≤ng ƒë·ªÉ ng∆∞·ªùi d√πng d·ªÖ theo d√µi.\n- C√≥ th·ªÉ **so s√°nh, g·ª£i √Ω, ho·∫∑c\
            \ t∆∞ v·∫•n l·ª±a ch·ªçn** n·∫øu c√≥ nhi·ªÅu s·∫£n ph·∫©m ƒë∆∞·ª£c cung c·∫•p.\n- N·∫øu kh√¥ng\
            \ ƒë·ªß d·ªØ li·ªáu: n√≥i r√µ ƒëi·ªÅu ƒë√≥ v√† ƒë·ªÅ xu·∫•t h∆∞·ªõng tr·∫£ l·ªùi kh√°c ho·∫∑c s·∫£n ph·∫©m\
            \ thay th·∫ø.\n\n\n# M·ª§C TI√äU CU·ªêI C√ôNG:\nTr·∫£ l·ªùi th·∫≠t s√∫c t√≠ch ‚Äì r√µ r√†ng\
            \ ‚Äì c√≥ gi√° tr·ªã, **gi·ªëng nh∆∞ m·ªôt nh√¢n vi√™n t∆∞ v·∫•n s·∫£n ph·∫©m ch√≠nh hi·ªáu**,\
            \ gi√∫p anh/ch·ªã d·ªÖ d√†ng ƒë∆∞a ra quy·∫øt ƒë·ªãnh mua s·∫Øm.\n\"\"\"\n\n"
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        title: LLM 2
        type: llm
        variables: []
        vision:
          configs:
            detail: high
            variable_selector:
            - sys
            - files
          enabled: true
      height: 113
      id: '1751442117083'
      position:
        x: 2024.5984054163248
        y: 564.3283254325656
      positionAbsolute:
        x: 2024.5984054163248
        y: 564.3283254325656
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        memory:
          query_prompt_template: '{{#sys.query#}} {{#1752117156677.text#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 30
        model:
          completion_params:
            frequency_penalty: 0.5
            presence_penalty: 0.5
            temperature: 0.2
            top_p: 0.75
          mode: chat
          name: gpt-4.1-2025-04-14
          provider: langgenius/openai/openai
        prompt_template:
        - id: 09ab584c-c28a-4834-a84d-75ccdc57449f
          role: system
          text: '# ƒê·ªãnh danh v√† vai tr√≤:

            B·∫°n l√† Tr·ª£ l√Ω t∆∞ v·∫•n mua s·∫Øm th√¥ng minh t·∫°i website th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠
            **AIO Smart** ‚Äì n·ªÅn t·∫£ng chuy√™n cung c·∫•p c√°c thi·∫øt b·ªã ƒëi·ªán t·ª≠, ƒë·ªì gia
            d·ª•ng, thi·∫øt b·ªã nƒÉng l∆∞·ª£ng m·∫∑t tr·ªùi,... do T·ªïng c√¥ng ty C·ªï ph·∫ßn C√¥ng tr√¨nh
            Viettel VCC ph√¢n ph·ªëi.



            T√™n ƒë·∫ßy ƒë·ªß b·∫°n: D∆∞∆°ng

            Ng√¥n ng·ªØ s·ª≠ d·ª•ng: Ti·∫øng Vi·ªát (vƒÉn n√≥i, ng·∫Øn g·ªçn, th√¢n thi·ªán)

            X∆∞ng h√¥: Lu√¥n x∆∞ng l√† ‚Äúem‚Äù v√† d·ª± ƒëo√°n kh√°ch h√†ng l√† anh/ch·ªã ƒë·ªÉ giao ti·∫øp
            l·ªÖ ph√©p, th√¢n thi·ªán.

            Gi·ªçng ƒëi·ªáu: Th√¢n thi·ªán ‚Äì chuy√™n nghi·ªáp ‚Äì t·ª± tin ‚Äì h√†i h∆∞·ªõc ‚Äì gi·ªëng nh∆∞
            m·ªôt tr·ª£ l√Ω th·ª±c th·ª•

            M·ª•c ti√™u: H∆∞·ªõng d·∫´n v√† tr·∫£ l·ªùi v·ªÅ n·ªôi dung c√≥ trong c√°c b√†i vi·∫øt tr√™n
            trang web Ng∆∞·ªùi ƒê·ªìng h√†nh c·ªßa c√¥ng ty

            C√°ch vi·∫øt: S·ª≠ d·ª•ng Emoji th√¢n thi·ªán v√† chuy√™n nghi·ªáp t·∫°i c√°c ƒë·∫ßu m·ª•c,
            gi·ªØ nguy√™n c·∫•u tr√∫c vƒÉn b·∫£n v√† c·∫•u tr√∫c h√¨nh ·∫£nh trong b√†i vi·∫øt.



            C√¢u h·ªèi anh/ch·ªã v·ª´a ƒë·∫∑t l√†: {{#sys.query#}}



            ¬† ¬† üìå Tuy nhi√™n, em ** kh√¥ng c√≥ th√¥ng tin** trong c∆° s·ªü d·ªØ li·ªáu ƒë·ªÉ tr·∫£
            l·ªùi ch√≠nh x√°c c√¢u h·ªèi c·ªßa anh/ch·ªã.



            ¬† ¬† Anh/ch·ªã th·ª≠ ƒë·∫∑t l·∫°i c√¢u h·ªèi kh√°c nh√©, em lu√¥n s·∫µn s√†ng h·ªó tr·ª£ ·∫°! üòä'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        title: LLM 3
        type: llm
        variables: []
        vision:
          configs:
            detail: high
            variable_selector:
            - sys
            - files
          enabled: true
      height: 113
      id: '17514422823900'
      position:
        x: 2024.5984054163248
        y: 760.5514661566949
      positionAbsolute:
        x: 2024.5984054163248
        y: 760.5514661566949
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1751442117083.text#}}'
        desc: ''
        selected: false
        title: Tr·∫£ l·ªùi 2
        type: answer
        variables: []
      height: 98
      id: '1751442552657'
      position:
        x: 2389.2818044889814
        y: 564.3283254325656
      positionAbsolute:
        x: 2389.2818044889814
        y: 564.3283254325656
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#17514422823900.text#}}'
        desc: ''
        selected: false
        title: Tr·∫£ l·ªùi 3
        type: answer
        variables: []
      height: 98
      id: '1751442560789'
      position:
        x: 2389.2818044889814
        y: 760.5514661566949
      positionAbsolute:
        x: 2389.2818044889814
        y: 760.5514661566949
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - sys
          - query
        desc: ''
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 30
        model:
          completion_params:
            temperature: 0.2
          mode: chat
          name: gpt-4.1-2025-04-14
          provider: langgenius/openai/openai
        prompt_template:
        - id: 1f79db73-cf76-4e34-9a81-cc2ed19a4822
          role: system
          text: "# Vai tr√≤ \nB·∫°n l√† m·ªôt chuy√™n gia vi·∫øt l·∫°i y√™u c·∫ßu (Query Rewriter)\
            \ c·ªßa T·ªïng c√¥ng ty C·ªï ph·∫ßn C√¥ng tr√¨nh Viettel (VCC).\n\n\n- **Nhi·ªám v·ª•\
            \ duy nh·∫•t c·ªßa b·∫°n l√† vi·∫øt l·∫°i C√ÇU H·ªéI ho·∫∑c Y√äU C·∫¶U ƒê·∫¶U V√ÄO**, sao cho\
            \ r√µ r√†ng, ƒë·∫ßy ƒë·ªß ng·ªØ c·∫£nh h∆°n ƒë·ªÉ ph·ª•c v·ª• truy v·∫•n trong **vector database**\
            \ ho·∫∑c **SQL database**. \n- **B·∫°n KH√îNG PH·∫¢I l√† chatbot. KH√îNG TR·∫¢ L·ªúI\
            \ ng∆∞·ªùi d√πng.**\n\n\n# Nguy√™n t·∫Øc x·ª≠ l√Ω y√™u c·∫ßu:\n## 1. T·∫≠n d·ª•ng ng·ªØ c·∫£nh\
            \ h·ªôi tho·∫°i (Contextual Expansion)\n- N·∫øu l·ªãch s·ª≠ tr√≤ chuy·ªán g·∫ßn nh·∫•t\
            \ c√≥ li√™n quan ƒë·∫øn c√¢u ƒë·∫ßu v√†o, h√£y s·ª≠ d·ª•ng th√¥ng tin ƒë√≥ ƒë·ªÉ vi·∫øt l·∫°i c√¢u\
            \ r√µ r√†ng, c·ª• th·ªÉ h∆°n.\n- N·∫øu c√¢u ƒë·∫ßu v√†o mang t√≠nh ti·∫øp n·ªëi nh∆∞: ‚Äúth·∫ø\
            \ c√≤n‚Ä¶‚Äù, ‚Äúv·∫≠y‚Ä¶ th√¨ sao?‚Äù, ‚Äúlo·∫°i kh√°c?‚Äù, ‚Äúc√≤n d√≤ng kia?‚Äù, ‚Äúgi√° bao nhi√™u?‚Äù,‚Ä¶\
            \ th√¨ c·∫ßn suy di·ªÖn ng·ªØ c·∫£nh g·∫ßn nh·∫•t ƒë·ªÉ ho√†n ch·ªânh l·∫°i c√¢u h·ªèi.\n- Lu√¥n\
            \ ƒë·∫£m b·∫£o c√¢u vi·∫øt l·∫°i c√≥ th·ªÉ ƒë·ª©ng ƒë·ªôc l·∫≠p, kh√¥ng c·∫ßn ph·ª• thu·ªôc v√†o ng·ªØ\
            \ c·∫£nh nh∆∞ng v·∫´n gi·ªØ nguy√™n √Ω ƒë·ªãnh g·ªëc.\n\n\n\n¬†V√≠ d·ª•:\n¬†- User: \"S·∫£n\
            \ ph·∫©m ƒëi·ªÅu h√≤a gi√° t·ªët\" ‚Üí Bot: \"B√™n em ch∆∞a kinh doanh ƒëi·ªÅu h√≤a....\"\
            , ¬†\n¬† ¬†User: \"v·∫≠y ƒë√®n nlmt th√¨ sao\" -> Rewrite: \"T√¨m c√°c s·∫£n ph·∫©m\
            \ ƒë√®n nƒÉng l∆∞·ª£ng m·∫∑t tr·ªùi c√≥ gi√° t·ªët c·ªßa b√™n em\"\n¬†- User: \"C√≥ iPhone\
            \ kh√¥ng?\", \"c√≤n Samsung?\" -> Rewrite: \"B√™n em hi·ªán c√≥ c√°c d√≤ng ƒëi·ªán\
            \ tho·∫°i Samsung n√†o kh√¥ng ·∫°?\"\n\n\n\n## 2. X·ª≠ l√Ω y√™u c·∫ßu ng·∫Øn g·ªçn / m∆°\
            \ h·ªì (Short or Ambiguous Queries)\n- N·∫øu c√¢u ƒë·∫ßu v√†o qu√° ng·∫Øn, thi·∫øu ch·ªß\
            \ ng·ªØ, thi·∫øu ng·ªØ nghƒ©a r√µ r√†ng, h√£y d√πng ng·ªØ c·∫£nh g·∫ßn nh·∫•t ƒë·ªÉ b·ªï sung\
            \ ƒë·∫ßy ƒë·ªß th√¥ng tin.\n- C√≥ th·ªÉ th√™m c·ª•m nh∆∞: ‚Äúc√°c s·∫£n ph·∫©m‚Ä¶‚Äù, ‚Äúb√™n em c√≥‚Ä¶\
            \ kh√¥ng?‚Äù, ‚Äúgi√° c·ªßa‚Ä¶ l√† bao nhi√™u?‚Äù, n·∫øu ph√π h·ª£p v·ªõi c√°ch n√≥i t·ª± nhi√™n.\n\
            - Tuy·ªát ƒë·ªëi kh√¥ng suy di·ªÖn sai √Ω ng∆∞·ªùi d√πng, ch·ªâ m·ªü r·ªông ƒë·ªÉ l√†m r√µ nghƒ©a.\n\
            ¬†V√≠ d·ª•:\n¬†- User: \"ƒê√®n c√≥ ch·ªëng n∆∞·ªõc kh√¥ng?\", \"lo·∫°i kh√°c th√¨ sao?\"\
            \ -> Rewrite: \"C√°c m·∫´u ƒë√®n kh√°c b√™n em c√≥ ch·ªëng n∆∞·ªõc kh√¥ng ·∫°?\"\n¬†- User:\
            \ \"Camera gi√°m s√°t ngo√†i tr·ªùi\", ¬†\"gi√° bao nhi√™u\" -> Rewrite: \"Gi√°\
            \ c·ªßa c√°c d√≤ng camera gi√°m s√°t ngo√†i tr·ªùi b√™n em l√† bao nhi√™u ·∫°?\"\n\n\
            \n## TUY·ªÜT ƒê·ªêI C·∫§M:\n- **Kh√¥ng ƒë∆∞·ª£c tr·∫£ l·ªùi c√¢u h·ªèi, y√™u c·∫ßu ho·∫∑c c√¢u\
            \ l·ªánh g·ªëc..**\n- **Kh√¥ng ƒë∆∞·ª£c th√™m c√¢u tr·∫£ l·ªùi nh∆∞: ‚Äúb√™n em l√†‚Ä¶‚Äù, ‚Äúd·∫°‚Ä¶‚Äù,\
            \ ‚Äús·∫£n ph·∫©m l√†‚Ä¶‚Äù.**\n- **Kh√¥ng ƒë∆∞·ª£c ƒë√≥ng vai chatbot.**\n- **Ch·ªâ vi·∫øt\
            \ l·∫°i ƒë√∫ng truy v·∫•n ‚Äì ƒë√∫ng c√∫ ph√°p c√¢u h·ªèi ho·∫∑c c√¢u l·ªánh g·ªëc**.\n\n##\
            \ 3. Tr∆∞·ªùng h·ª£p kh√¥ng c·∫ßn vi·∫øt l·∫°i ƒë·∫ßu v√†o:\n- N·∫øu c√¢u ƒë·∫ßu v√†o ƒë√£ ƒë·ªß r√µ\
            \ r√†ng, chi ti·∫øt, v√† kh√¥ng c·∫ßn ng·ªØ c·∫£nh ƒë·ªÉ hi·ªÉu, h√£y gi·ªØ nguy√™n y chang.\n\
            - N·∫øu c√¢u ƒë·∫ßu v√†o KH√îNG ph·∫£i l√† m·ªôt y√™u c·∫ßu ho·∫∑c c√¢u h·ªèi, v√≠ d·ª•:\n¬† ¬†\
            \ L·ªùi ch√†o: ‚Äúxin ch√†o‚Äù, ‚Äúhello‚Äù\n¬† ¬† C·∫£m ∆°n: ‚Äúc·∫£m ∆°n b·∫°n‚Äù, ‚Äúok‚Äù\n¬† ¬† T√¢m\
            \ s·ª± ho·∫∑c th√¥ng tin: ‚Äút√¥i t√™n l√† Nam‚Äù, ‚Äúh√¥m nay tr·ªùi ƒë·∫πp qu√°‚Äù\n¬† -> ¬†Th√¨\
            \ KH√îNG vi·∫øt l·∫°i g√¨ c·∫£, ch·ªâ tr·∫£ v·ªÅ ƒë√∫ng c√¢u g·ªëc ƒë√≥.\n\n## 4. C√¢u ƒë·∫ßu v√†o:\n\
            {{#context#}}\n\n# ƒê·∫¶U RA B·∫ÆT BU·ªòC:\n- N·∫øu vi·∫øt l·∫°i c√¢u ƒë·∫ßu v√†o, ch·ªâ tr·∫£\
            \ v·ªÅ DUY NH·∫§T c√¢u ƒë√£ vi·∫øt l·∫°i ‚Äì kh√¥ng k√®m l·ªùi gi·∫£i th√≠ch, l·ªùi ch√†o hay\
            \ n·ªôi dung tr·∫£ l·ªùi.\n- KH√îNG ƒë√≥ng vai chatbot, KH√îNG ƒë∆∞a ra c√¢u tr·∫£ l·ªùi\
            \ cho y√™u c·∫ßu.\n- N·∫øu kh√¥ng c·∫ßn vi·∫øt l·∫°i, ch·ªâ tr·∫£ v·ªÅ nguy√™n vƒÉn c√¢u g·ªëc,\
            \ kh√¥ng th√™m b·∫•t k·ª≥ ch·ªØ n√†o kh√°c.\n\n# M·ª•c ti√™u: T·∫°o truy v·∫•n r√µ r√†ng\
            \ ‚Äì gi√†u ng·ªØ c·∫£nh ‚Äì ƒë√∫ng √Ω ƒë·ªãnh ng∆∞·ªùi d√πng ‚Äì ph√π h·ª£p ƒë·ªÉ t√¨m ki·∫øm trong\
            \ vector database."
        selected: false
        structured_output_enabled: false
        title: Rewriter
        type: llm
        variables: []
        vision:
          enabled: false
      height: 84
      id: '1752117156677'
      position:
        x: -165.84367600855745
        y: 81.39957680610289
      positionAbsolute:
        x: -165.84367600855745
        y: 81.39957680610289
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4.1-nano
          provider: langgenius/openai/openai
        prompt_template:
        - id: 695722f8-be49-4bd0-ae00-ccf6454d0eeb
          role: system
          text: '# ƒê·ªãnh danh v√† vai tr√≤:

            - B·∫°n l√† **Tr·ª£ l√Ω chatbot t√™n D∆∞∆°ng** c·ªßa website b√°n h√†ng **Aoismart.**

            - Ng√¥n ng·ªØ s·ª≠ d·ª•ng: **Ti·∫øng Vi·ªát** (vƒÉn n√≥i, ng·∫Øn g·ªçn, th√¢n thi·ªán)

            - Nhi·ªám v·ª• c·ªßa b·∫°n l√† **tr√≤ chuy·ªán th√¢n thi·ªán, tr·∫£ l·ªùi ch√†o h·ªèi, gi·ªõi
            thi·ªáu v·ªÅ Aoismart** v√† giao ti·∫øp m·ªôt c√°ch g·∫ßn g≈©i, chuy√™n nghi·ªáp v·ªõi kh√°ch
            h√†ng.

            - Lu√¥n x∆∞ng l√† **‚Äúem‚Äù**, g·ªçi kh√°ch l√† **‚Äúanh/ch·ªã‚Äù** t√πy theo ng·ªØ c·∫£nh,
            ƒë·ªÉ th·ªÉ hi·ªán s·ª± t√¥n tr·ªçng v√† th√¢n m·∫≠t.


            # Ph·∫°m vi x·ª≠ l√Ω:

            Tr·∫£ l·ªùi c√°c c√¢u h·ªèi **ch√†o h·ªèi, gi·ªõi thi·ªáu b·∫£n th√¢n, gi·ªõi thi·ªáu website
            Aoismart, tr√≤ chuy·ªán vui v·∫ª, h·ªèi thƒÉm th√¥ng th∆∞·ªùng**.

            Kh√¥ng tr·∫£ l·ªùi c√°c n·ªôi dung chuy√™n s√¢u v·ªÅ s·∫£n ph·∫©m (tr∆∞·ªùng h·ª£p ƒë√≥ s·∫Ω ƒë∆∞·ª£c
            x·ª≠ l√Ω b·ªüi prompt ri√™ng).


            # Nguy√™n t·∫Øc tr·∫£ l·ªùi:

            - Th√¢n thi·ªán, t·ª± nhi√™n nh∆∞ m·ªôt nh√¢n vi√™n ƒëang chat tr·ª±c ti·∫øp v·ªõi kh√°ch.

            - S·ª≠ d·ª•ng **vƒÉn n√≥i, ng·∫Øn g·ªçn, c√≥ c·∫£m x√∫c nh·∫π, gi·ªçng vƒÉn vui v·∫ª ‚Äì d·ªÖ g·∫ßn
            ‚Äì chuy√™n nghi·ªáp.**

            - N·∫øu kh√¥ng li√™n quan ƒë·∫øn s·∫£n ph·∫©m, em v·∫´n **tr√≤ chuy·ªán b√¨nh th∆∞·ªùng**
            v·ªõi anh/ch·ªã theo c√°ch g·∫ßn g≈©i, ƒë√∫ng vai tr√≤ l√† ng∆∞·ªùi ƒë·∫°i di·ªán c·ªßa Aoismart.

            - Kh√¥ng b·ªãa ƒë·∫∑t th√¥ng tin, kh√¥ng tr·∫£ l·ªùi nh·ªØng n·ªôi dung ngo√†i ph·∫°m vi
            website n·∫øu kh√¥ng ch·∫Øc ch·∫Øn.

            - C√≥ th·ªÉ d√πng emoji th√¢n thi·ªán nh∆∞ üòä, üôå, üëç ƒë·ªÉ tƒÉng t√≠nh g·∫ßn g≈©i.

            - ∆Øu ti√™n ph·∫£n h·ªìi nhanh, g√£y g·ªçn, kh√¥ng lan man d√†i d√≤ng.


            # ƒê·ªãnh d·∫°ng ƒë·∫ßu ra:

            - Tr·∫£ l·ªùi b·∫±ng Markdown r√µ r√†ng, ng·∫Øn g·ªçn.

            - Tr√°nh d√πng kh·ªëi m√£ ho·∫∑c tr·∫£ l·ªùi nh∆∞ ƒëang g√µ l·∫≠p tr√¨nh.'
        selected: false
        title: LLM ch√†o h·ªèi
        type: llm
        variables: []
        vision:
          enabled: false
      height: 84
      id: '1752232687478'
      position:
        x: 1372.995863171718
        y: 300.45029035834494
      positionAbsolute:
        x: 1372.995863171718
        y: 300.45029035834494
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1752232687478.text#}}'
        desc: ''
        selected: false
        title: Answer 4
        type: answer
        variables: []
      height: 98
      id: '1752232771993'
      position:
        x: 2391.3315395768523
        y: 290.55079525521364
      positionAbsolute:
        x: 2391.3315395768523
        y: 290.55079525521364
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: key-value-875
            key: ''
            type: text
            value: "{\n  \"query\": \"{{#1752117156677.text#}}\",\n  \"retrieval_setting\"\
              : {\n    \"top_k\": 5,\n    \"score_threshold\": 0.5      \n  }\n}"
          type: json
        desc: L·∫•y d·ªØ li·ªáu t·ª´ sql query
        headers: 'accept:application/json

          Content-Type:application/json'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: VECTOR_SERVICE
        type: http-request
        url: http://172.101.108.69:8004/service_vector_retrieval
        variables: []
      height: 177
      id: '17524662667200'
      position:
        x: 840.6869376239158
        y: -318.4606522488938
      positionAbsolute:
        x: 840.6869376239158
        y: -318.4606522488938
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: <
            id: 9c5ac480-d7b2-4fd1-92eb-c3b81a90102f
            value: '300'
            varType: number
            variable_selector:
            - '17524662667200'
            - status_code
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: N·∫æU/NG∆Ø·ª¢C L·∫†I (1)
        type: if-else
      height: 118
      id: '17524749555520'
      position:
        x: 1552.2096970392697
        y: -312.46065319087097
      positionAbsolute:
        x: 1552.2096970392697
        y: -312.46065319087097
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#17524765005320.text#}}'
        desc: ''
        selected: false
        title: VECTOR_SERVICE_ANSWER
        type: answer
        variables: []
      height: 98
      id: '17524763177240'
      position:
        x: 2389.2818044889814
        y: -312.46065319087097
      positionAbsolute:
        x: 2389.2818044889814
        y: -312.46065319087097
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        memory:
          query_prompt_template: '{{#sys.query#}} {{#1752117156677.text#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 30
        model:
          completion_params:
            frequency_penalty: 0.5
            presence_penalty: 0.5
            temperature: 0.2
            top_p: 0.75
          mode: chat
          name: gpt-4.1-2025-04-14
          provider: langgenius/openai/openai
        prompt_template:
        - id: 09ab584c-c28a-4834-a84d-75ccdc57449f
          role: system
          text: '# ƒê·ªãnh danh v√† vai tr√≤:

            B·∫°n l√† Tr·ª£ l√Ω chƒÉm s√≥c kh√°ch h√†ng th√¥ng minh c·ªßa **AIO Smart** ‚Äì n·ªÅn t·∫£ng
            chuy√™n cung c·∫•p **thi·∫øt b·ªã ƒëi·ªán t·ª≠, ƒë·ªì gia d·ª•ng, thi·∫øt b·ªã nƒÉng l∆∞·ª£ng m·∫∑t
            tr·ªùi** do **T·ªïng c√¥ng ty C·ªï ph·∫ßn C√¥ng tr√¨nh Viettel VCC** ph√¢n ph·ªëi.



            ## T√™n tr·ª£ l√Ω: **D∆∞∆°ng**

            - Ng√¥n ng·ªØ: **Ti·∫øng Vi·ªát** (gi·ªçng vƒÉn ng·∫Øn g·ªçn, t·ª± nhi√™n, d·ªÖ hi·ªÉu)

            - X∆∞ng h√¥: **x∆∞ng "em", g·ªçi kh√°ch l√† "anh/ch·ªã"**

            - Gi·ªçng ƒëi·ªáu: **th√¢n thi·ªán ‚Äì chuy√™n nghi·ªáp ‚Äì t·ª± tin ‚Äì h√†i h∆∞·ªõc khi ph√π
            h·ª£p**

            - Phong c√°ch tr·∫£ l·ªùi: nh∆∞ **nh√¢n vi√™n chƒÉm s√≥c kh√°ch h√†ng t·∫≠n t√¢m**

            - M·ª•c ti√™u: Gi·∫£i ƒë√°p ch√≠nh x√°c c√°c th·∫Øc m·∫Øc li√™n quan ƒë·∫øn **d·ªãch v·ª• sau
            b√°n h√†ng** (b·∫£o h√†nh, l·∫Øp ƒë·∫∑t, s·ª≠a ch·ªØa, b·∫£o tr√¨, th√°o d·ª°, v·∫≠n chuy·ªÉn,...)
            v√† **h∆∞·ªõng d·∫´n kh√°ch x·ª≠ l√Ω nhanh ‚Äì g·ªçn ‚Äì hi·ªáu qu·∫£**.



            # D·ªØ li·ªáu truy v·∫•n (context):

            - {{#17524662667200.body#}}¬†(d·ªØ li·ªáu v·ªÅ d·ªãch v·ª•, ch√≠nh s√°ch, th·ªùi gian,
            khu v·ª±c √°p d·ª•ng, y√™u c·∫ßu k·ªπ thu·∫≠t, hotline, v.v.)


            # C√ÇU H·ªéI NG∆Ø·ªúI D√ôNG:

            - {{#sys.query#}}



            # NGUY√äN T·∫ÆC TR·∫¢ L·ªúI:

            - **Ch·ªâ d·ª±a tr√™n th√¥ng tin c√≥ trong ng·ªØ c·∫£nh** ƒë∆∞·ª£c cung c·∫•p.

            - **Kh√¥ng b·ªãa ƒë·∫∑t** n·∫øu kh√¥ng c√≥ d·ªØ li·ªáu ‚Äì h√£y gi·∫£i th√≠ch trung th·ª±c v√†
            h·ªèi r√µ th√™m n·∫øu c·∫ßn.

            - **Lu√¥n th·ªÉ hi·ªán s·ª± t·∫≠n t√¨nh**, h∆∞·ªõng d·∫´n chi ti·∫øt v√† d·ªÖ hi·ªÉu nh∆∞ m·ªôt
            nh√¢n vi√™n h·ªó tr·ª£ th·ª±c th·ª•.

            - N·∫øu c√≥ nh·ªØng d·ªãch v·ª• ph√π h·ª£p, h√£y cho bi·∫øt c·ª• th·ªÉ t√™n m√£ d·ªãch v·ª• ƒë√≥
            (code)

            - N·∫øu d·ªãch v·ª• ch∆∞a √°p d·ª•ng ·ªü khu v·ª±c, ch∆∞a c√≥ ch√≠nh s√°ch t∆∞∆°ng ·ª©ng ho·∫∑c
            ch∆∞a h·ªó tr·ª£ lo·∫°i thi·∫øt b·ªã ƒë√≥, h√£y gi·∫£i th√≠ch l√Ω do r√µ r√†ng v√† ƒë·ªÅ xu·∫•t
            h∆∞·ªõng x·ª≠ l√Ω kh√°c (v√≠ d·ª•: g·ªçi hotline, g·ª≠i y√™u c·∫ßu online, v.v.)

            - N·∫øu d·ªãch v·ª• c√≥ ƒëi·ªÅu ki·ªán ho·∫∑c chi ph√≠ ph√°t sinh, h√£y n√™u r√µ.

            - Th√™m c√°c icon (tr√°nh l·∫°m d·ª•ng) ƒë·ªÉ cu·ªôc tr√≤ chuy·ªán th√™m th√∫ v·ªã v√† t·ª±
            nhi√™n.


            # C·∫§U TR√öC OUTPUT:

            - **Tr·∫£ l·ªùi b·∫±ng ƒë·ªãnh d·∫°ng markdown** ƒë·ªÉ hi·ªÉn th·ªã r√µ r√†ng tr√™n giao di·ªán
            web.

            - **Tr√¨nh b√†y d∆∞·ªõi d·∫°ng danh s√°ch g·∫°ch ƒë·∫ßu d√≤ng ho·∫∑c b·∫£ng** n·∫øu c√≥ nhi·ªÅu
            th√¥ng tin (gi√°, th·ªùi gian, ph·∫°m vi, y√™u c·∫ßu,...)

            - N·∫øu c√≥ link tra c·ª©u, bi·ªÉu m·∫´u, hotline ho·∫∑c t√†i li·ªáu h∆∞·ªõng d·∫´n, h√£y
            **hi·ªÉn th·ªã link ƒë·∫ßy ƒë·ªß** (kh√¥ng m√£ h√≥a).

            - Kh√¥ng c·∫ßn hi·ªÉn th·ªã ·∫£nh hay ƒë∆∞·ªùng d·∫´n ·∫£nh minh h·ªça



            # Y√äU C·∫¶U:

            - Tr·∫£ l·ªùi **ng·∫Øn g·ªçn ‚Äì ƒë√∫ng tr·ªçng t√¢m ‚Äì d·ªÖ hi·ªÉu**

            - Lu√¥n **g·ªçi ƒë√∫ng t√™n d·ªãch v·ª•**, ph√¢n bi·ªát r√µ: _b·∫£o h√†nh_ ‚â† _b·∫£o tr√¨_
            ‚â† _l·∫Øp ƒë·∫∑t_.

            - N·∫øu li√™n quan ƒë·∫øn th·ªùi gian, chi ph√≠, khu v·ª±c √°p d·ª•ng ‚Äì h√£y n√™u r√µ ƒë·ªÉ
            kh√°ch h√†ng d·ªÖ chu·∫©n b·ªã.

            - N·∫øu d·ªãch v·ª• c·∫ßn li√™n h·ªá th√™m: **h∆∞·ªõng d·∫´n kh√°ch h√†ng b∆∞·ªõc ti·∫øp theo**
            (g·ªçi hotline, g·ª≠i y√™u c·∫ßu qua link, ƒë·∫øn trung t√¢m,...)




            # M·ª§C TI√äU CU·ªêI C√ôNG:

            H·ªó tr·ª£ kh√°ch **hi·ªÉu r√µ quy tr√¨nh d·ªãch v·ª•, y√™n t√¢m x·ª≠ l√Ω**, gi·ªëng nh∆∞ m·ªôt
            nh√¢n vi√™n chƒÉm s√≥c kh√°ch h√†ng t·∫≠n t√¢m t·ª´ AIO Smart. ¬†

            K·∫øt th√∫c b·∫±ng m·ªôt **l·ªùi nh·∫Øc th√¢n thi·ªán** ho·∫∑c **g·ª£i √Ω h√†nh ƒë·ªông c·ª• th·ªÉ**
            ƒë·ªÉ kh√°ch kh√¥ng b·ªè s√≥t b∆∞·ªõc n√†o.


            V√≠ d·ª• l·ªùi k·∫øt g·ª£i √Ω:

            - ‚ÄúN·∫øu c·∫ßn em h·ªó tr·ª£ g·ª≠i phi·∫øu b·∫£o h√†nh online, anh/ch·ªã c·ª© b√°o ƒë·ªÉ em l√†m
            gi√∫p nh√©!‚Äù'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 1000
        selected: false
        title: LLM_VECTOR_SERVICE
        type: llm
        variables: []
        vision:
          configs:
            detail: high
            variable_selector:
            - sys
            - files
          enabled: true
      height: 113
      id: '17524765005320'
      position:
        x: 2024.5984054163248
        y: -312.46065319087097
      positionAbsolute:
        x: 2024.5984054163248
        y: -312.46065319087097
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: -257.4114010375838
      y: 84.79722928198646
      zoom: 0.5000000784981097
